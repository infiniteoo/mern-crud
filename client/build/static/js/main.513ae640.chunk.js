(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{148:function(e,t){},150:function(e,t){},266:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c(62),a=c.n(s),o=(c(65),c(11)),r=c(2),l=c(6),i=function(){if("undefined"!==window)return!!sessionStorage.getItem("token")&&JSON.parse(sessionStorage.getItem("token"))},j=function(){if("undefined"!==window)return!!sessionStorage.getItem("user")&&JSON.parse(sessionStorage.getItem("user"))},b=c(0),u=Object(r.g)((function(e){var t=e.history;return Object(b.jsx)("nav",{children:Object(b.jsxs)("ul",{className:"nav nav-tabs",children:[Object(b.jsx)("li",{className:"nav-item pr-3 pt-3 pb-3",children:Object(b.jsx)(o.b,{to:"/",children:"Home"})}),Object(b.jsx)("li",{className:"nav-item pr-3 pt-3 pb-3",children:Object(b.jsx)(o.b,{to:"/create",children:"Create"})}),!j()&&Object(b.jsx)("li",{className:"nav-item ml-auto pr-3 pt-3 pb-3",children:Object(b.jsx)(o.b,{to:"/login",children:"Login"})}),j()&&Object(b.jsx)("li",{onClick:function(){return e=function(){return t.push("/")},"undefined"!==window&&(sessionStorage.removeItem("token"),sessionStorage.removeItem("user")),void e();var e},className:"nav-item ml-auto pr-3 pt-3 pb-3",style:{cursor:"pointer",float:"right"},children:"Logout"})]})})})),d=c(9),h=c.n(d),m=c(44),p=c.n(m),O=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],s=t[1],a=function(){h.a.get("".concat("http://localhost:8000/api","/posts")).then((function(e){console.log(e),s(e.data)})).catch((function(e){return alert("Error fetching posts")}))};Object(n.useEffect)((function(){a()}),[]);var r=function(e){h.a.delete("".concat("http://localhost:8000/api","/post/").concat(e),{headers:{authorization:"Bearer ".concat(i())}}).then((function(e){alert(e.data.message),a()})).catch((function(e){return alert("Error deleting post.")}))};return Object(b.jsxs)("div",{className:"container pb-5",children:[Object(b.jsx)(u,{}),Object(b.jsx)("br",{}),Object(b.jsx)("h1",{children:" MERN CRUD "}),Object(b.jsx)("hr",{}),c.map((function(e,t){return Object(b.jsx)("div",{className:"row",style:{borderBottom:"1px solid silver"},children:Object(b.jsx)("div",{className:"col pt-3 pb-2",children:Object(b.jsxs)("div",{className:"row",children:[Object(b.jsxs)("div",{className:"col-md-10",children:[Object(b.jsx)(o.b,{to:"/post/".concat(e.slug),children:Object(b.jsx)("h2",{children:e.title})}),Object(b.jsx)("div",{className:"lead pt-3",children:p()(e.content.substring(0,100))}),Object(b.jsxs)("p",{children:["Author ",Object(b.jsx)("span",{className:"badge",children:e.user})," Published on",Object(b.jsx)("span",{className:"badge",children:new Date(e.createdAt).toLocaleString()})]})]}),j()&&Object(b.jsxs)("div",{className:"col-md-2",children:[Object(b.jsx)(o.b,{to:"/post/update/".concat(e.slug),className:"btn btn-sm btn-outline-warning",children:"Update"}),Object(b.jsx)("button",{onClick:function(){return t=e.slug,void(window.confirm("Are you sure you want to delete this post?")&&r(t));var t},className:"btn btn-sm btn-outline-danger ml-1",children:"Delete"})]})]})})},e._id)}))]})},x=c(17),f=c(3),g=c(45),v=c.n(g),N=(c(107),function(){var e=Object(n.useState)({title:"",user:j()}),t=Object(l.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(""),o=Object(l.a)(a,2),r=o[0],d=o[1],m=c.title,p=c.user,O=function(e){return function(t){console.log("name",e,"event",t.target.value),s(Object(f.a)(Object(f.a)({},c),{},Object(x.a)({},e,t.target.value)))}};return Object(b.jsxs)("div",{className:"container pb-5",children:[Object(b.jsx)(u,{}),Object(b.jsx)("br",{}),Object(b.jsx)("h1",{children:" CREATE POST "}),Object(b.jsx)("br",{}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h.a.post("".concat("http://localhost:8000/api","/post"),{title:m,content:r,user:p},{headers:{authorization:"Bearer ".concat(i())}}).then((function(e){console.log(e),s(Object(f.a)(Object(f.a)({},c),{},{title:"",user:""})),d(""),alert("Post titled ".concat(e.data.title," is created."))})).catch((function(e){console.log(e.response),alert(e.response.data.error)}))},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Title"}),Object(b.jsx)("input",{onChange:O("title"),value:m,type:"text",className:"form-control",placeholder:"Post Title",required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Content"}),Object(b.jsx)(v.a,{onChange:function(e){console.log(e),d(e)},value:r,theme:"bubble",className:"pb-5 mb-3",placeholder:"Write something",style:{border:"1px solid #666"}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"User"}),Object(b.jsx)("input",{onChange:O("user"),value:p,type:"text",className:"form-control",placeholder:"Your Name",required:!0})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"btn btn-primary m-2",children:"Create"})})]})]})}),S=function(e){var t=Object(n.useState)(""),c=Object(l.a)(t,2),s=c[0],a=c[1];Object(n.useEffect)((function(){h.a.get("".concat("http://localhost:8000/api","/post/").concat(e.match.params.slug)).then((function(e){return a(e.data)})).catch((function(e){return alert("Error loading single post")}))}),[]);return Object(b.jsxs)("div",{className:"container pb-5",children:[Object(b.jsx)(u,{}),s&&Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col md-8 offset-md-2 pt-3 pb-2",children:[Object(b.jsx)("br",{}),Object(b.jsx)("h1",{children:s.title}),Object(b.jsx)("div",{className:"lead pt-3",children:p()(s.content)}),Object(b.jsxs)("p",{children:["Author ",Object(b.jsx)("span",{className:"badge",children:s.user})," Published on"," ",Object(b.jsx)("span",{className:"badge",children:new Date(s.createdAt).toLocaleString()})]})]})})]})},w=function(e){var t=Object(n.useState)(""),c=Object(l.a)(t,2),s=(c[0],c[1],Object(n.useState)({title:"",slug:"",user:""})),a=Object(l.a)(s,2),o=a[0],r=a[1],j=o.title,d=o.slug,m=o.user,p=Object(n.useState)(""),O=Object(l.a)(p,2),g=O[0],N=O[1],S=function(e){console.log(e),N(e)},w=function(e){return function(t){console.log("name",e,"event",t.target.value),r(Object(f.a)(Object(f.a)({},o),{},Object(x.a)({},e,t.target.value)))}},y=function(e){e.preventDefault(),h.a.put("".concat("http://localhost:8000/api","/post/").concat(d),{title:j,content:g,user:m},{headers:{authorization:"Bearer ".concat(i())}}).then((function(e){console.log(e);var t=e.data,c=t.title,n=t.content,s=t.slug,a=t.user;r(Object(f.a)(Object(f.a)({},o),{},{title:c,content:n,user:a,slug:s})),alert("Post titled ".concat(c," is updated."))})).catch((function(e){console.log(e.response),alert(e.response.data.error)}))};Object(n.useEffect)((function(){h.a.get("".concat("http://localhost:8000/api","/post/").concat(e.match.params.slug)).then((function(e){var t=e.data,c=t.title,n=t.content,s=t.slug,a=t.user;r(Object(f.a)(Object(f.a)({},o),{},{title:c,slug:s,user:a})),N(n)})).catch((function(e){return alert("Error loading single post")}))}),[]);return Object(b.jsxs)("div",{className:"container pb-5",children:[Object(b.jsx)(u,{}),Object(b.jsx)("br",{}),Object(b.jsx)("h1",{children:"UPDATE POST"}),Object(b.jsxs)("form",{onSubmit:y,children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Title"}),Object(b.jsx)("input",{onChange:w("title"),value:j,type:"text",className:"form-control",placeholder:"Post Title",required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Content"}),Object(b.jsx)(v.a,{onChange:S,value:g,theme:"bubble",className:"pb-5 mb-3",placeholder:"Write something",style:{border:"1px solid #666"}})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"User"}),Object(b.jsx)("input",{onChange:w("user"),value:m,type:"text",className:"form-control",placeholder:"Your Name",required:!0})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"btn btn-primary m-2",children:"Update"})})]})]})},y=Object(r.g)((function(e){var t=Object(n.useState)({name:"",password:""}),c=Object(l.a)(t,2),s=c[0],a=c[1],o=s.name,r=s.password;Object(n.useEffect)((function(){j()&&e.history.push("/")}));var i=function(e){return function(t){console.log("name",e,"event",t.target.value),a(Object(f.a)(Object(f.a)({},s),{},Object(x.a)({},e,t.target.value)))}};return Object(b.jsxs)("div",{className:"container pb-5",children:[Object(b.jsx)(u,{}),Object(b.jsx)("br",{}),Object(b.jsx)("h1",{children:"LOGIN"}),Object(b.jsx)("hr",{}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),console.table({name:o,password:r}),h.a.post("".concat("http://localhost:8000/api","/login"),{name:o,password:r}).then((function(t){console.log(t),function(e,t){"undefined"!==window&&(sessionStorage.setItem("token",JSON.stringify(e.data.token)),sessionStorage.setItem("user",JSON.stringify(e.data.name))),t()}(t,(function(){return e.history.push("/create")}))})).catch((function(e){console.log(e.response),alert(e.response.data.error)}))},children:[Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"User"}),Object(b.jsx)("input",{onChange:i("name"),value:o,type:"text",className:"form-control",placeholder:"Your Name",required:!0})]}),Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("label",{className:"text-muted",children:"Password"}),Object(b.jsx)("input",{onChange:i("password"),value:r,type:"password",className:"form-control",placeholder:"Your Password",required:!0})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"btn btn-primary m-2",children:"Submit"})})]})]})})),C=c(109),E=function(e){var t=e.component,c=Object(C.a)(e,["component"]);return Object(b.jsx)(r.b,Object(f.a)(Object(f.a)({},c),{},{render:function(e){return j()?Object(b.jsx)(t,Object(f.a)({},e)):Object(b.jsx)(r.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},P=function(){return Object(b.jsx)(o.a,{children:Object(b.jsxs)(r.d,{children:[Object(b.jsx)(r.b,{path:"/",exact:!0,component:O}),Object(b.jsx)(E,{path:"/create",exact:!0,component:N}),Object(b.jsx)(r.b,{path:"/post/:slug",exact:!0,component:S}),Object(b.jsx)(E,{path:"/post/update/:slug",exact:!0,component:w}),Object(b.jsx)(r.b,{path:"/login",exact:!0,component:y})]})})};a.a.render(Object(b.jsx)(P,{}),document.getElementById("root"))},65:function(e,t,c){}},[[266,1,2]]]);
//# sourceMappingURL=main.513ae640.chunk.js.map