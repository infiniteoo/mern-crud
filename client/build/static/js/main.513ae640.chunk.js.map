{"version":3,"sources":["helpers.js","Nav.js","App.js","Create.js","SinglePost.js","UpdatePost.js","Login.js","PrivateRoute.js","Routes.js","index.js"],"names":["getToken","window","sessionStorage","getItem","JSON","parse","getUser","withRouter","history","className","to","onClick","next","push","removeItem","style","cursor","float","App","useState","posts","setPosts","fetchPosts","axios","get","process","then","response","console","log","data","catch","error","alert","useEffect","deletePost","slug","delete","headers","authorization","message","map","post","i","borderBottom","title","renderHTML","content","substring","user","Date","createdAt","toLocaleString","confirm","_id","Create","state","setState","setContent","handleChange","name","event","target","value","onSubmit","preventDefault","onChange","type","placeholder","required","theme","border","SinglePost","props","setPost","match","params","UpdatePost","handleContent","handleSubmit","put","password","table","setItem","stringify","token","authenticate","PrivateRoute","Component","component","rest","render","pathname","from","location","Routes","path","exact","Login","ReactDOM","document","getElementById"],"mappings":"2MAeaA,EAAW,WACpB,GAAc,cAAXC,OACC,QAAGC,eAAeC,QAAQ,UACjBC,KAAKC,MAAMH,eAAeC,QAAQ,WAatCG,EAAU,WACnB,GAAc,cAAXL,OACC,QAAGC,eAAeC,QAAQ,SACjBC,KAAKC,MAAMH,eAAeC,QAAQ,U,OCGpCI,eA7BH,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAAH,OACV,8BACI,qBAAIC,UAAU,eAAd,UACI,oBAAIA,UAAU,0BAAd,SACI,cAAC,IAAD,CAAMC,GAAG,IAAT,oBAEJ,oBAAID,UAAU,0BAAd,SACI,cAAC,IAAD,CAAMC,GAAG,UAAT,uBAGFJ,KACE,oBAAIG,UAAU,kCAAd,SACI,cAAC,IAAD,CAAMC,GAAG,SAAT,qBAIPJ,KACG,oBACIK,QAAS,kBDiBJC,ECjBiB,kBAAMJ,EAAQK,KAAK,MDkBzC,cAAXZ,SAECC,eAAeY,WAAW,SAC1BZ,eAAeY,WAAW,cAG9BF,IAPkB,IAACA,GChBLH,UAAU,kCACVM,MAAO,CAAEC,OAAQ,UAAWC,MAAO,SAHvC,4B,iCCyECC,EAvFH,WAAO,IAAD,EAEUC,mBAAS,IAFnB,mBAETC,EAFS,KAEFC,EAFE,KAIVC,EAAa,WACjBC,IAAMC,IAAN,UAAaC,4BAAb,WACCC,MAAK,SAAAC,GACJC,QAAQC,IAAIF,GACZN,EAASM,EAASG,SAEnBC,OAAM,SAAAC,GAAK,OAAIC,MAAM,4BAIxBC,qBAAU,WACRZ,MAEC,IAEH,IAOMa,EAAa,SAACC,GAClBb,IAAMc,OAAN,UAAgBZ,4BAAhB,iBAAkDW,GAAO,CACvDE,QAAS,CACLC,cAAc,UAAD,OAAYvC,QAG9B0B,MAAK,SAAAC,GACJM,MAAMN,EAASG,KAAKU,SACpBlB,OAEDS,OAAM,SAAAC,GAAK,OAAIC,MAAM,4BAGxB,OACE,sBAAKxB,UAAU,iBAAf,UACE,cAAC,EAAD,IACA,uBACA,6CACA,uBAGEW,EAAMqB,KAAI,SAACC,EAAMC,GAAP,OACR,qBAAKlC,UAAU,MAAqBM,MAAO,CAAC6B,aAAc,oBAA1D,SACG,qBAAKnC,UAAU,gBAAf,SACE,sBAAKA,UAAU,MAAf,UACC,sBAAKA,UAAU,YAAf,UACI,cAAC,IAAD,CAAMC,GAAE,gBAAWgC,EAAKN,MAAxB,SACE,6BAAKM,EAAKG,UAGZ,qBAAKpC,UAAU,YAAf,SAA4BqC,IAAWJ,EAAKK,QAAQC,UAAU,EAAE,QAEhE,wCACS,sBAAMvC,UAAU,QAAhB,SAAyBiC,EAAKO,OADvC,gBAEE,sBAAMxC,UAAU,QAAhB,SAAyB,IAAIyC,KAAKR,EAAKS,WAAWC,yBAIvD9C,KACC,sBAAKG,UAAU,WAAf,UACA,cAAC,IAAD,CAAMC,GAAE,uBAAkBgC,EAAKN,MAAS3B,UAAU,iCAAlD,oBAII,wBAAQE,QAAS,kBAnDdyB,EAmDgCM,EAAKN,UAlD7CnC,OAAOoD,QAAQ,+CAE1BlB,EAAWC,IAHO,IAACA,GAmD4C3B,UAAU,qCAAzD,6BAtBciC,EAAKY,Y,gCCoC1BC,G,OAvFA,WAAO,IAAD,EAEOpC,mBAAS,CAC/B0B,MAAO,GACPI,KAAM3C,MAJS,mBAEZkD,EAFY,KAELC,EAFK,OAOWtC,mBAAS,IAPpB,mBAOZ4B,EAPY,KAOHW,EAPG,KAiBZb,EAAeW,EAAfX,MAAOI,EAAQO,EAARP,KAERU,EAAe,SAACC,GAAD,OAAU,SAACC,GAC9BjC,QAAQC,IAAI,OAAQ+B,EAAM,QAASC,EAAMC,OAAOC,OAChDN,EAAS,2BAAID,GAAL,kBAAaI,EAAOC,EAAMC,OAAOC,WA4B3C,OACE,sBAAKtD,UAAU,iBAAf,UACI,cAAC,EAAD,IACA,uBACF,+CAEA,uBACA,uBAAMuD,SA/BW,SAAAH,GACjBA,EAAMI,iBACN1C,IAAMmB,KAAN,UAAcjB,4BAAd,SAAgD,CAAEoB,QAAOE,UAASE,QAAQ,CACtEX,QAAS,CACLC,cAAc,UAAD,OAAYvC,QAGhC0B,MAAK,SAAAC,GAEFC,QAAQC,IAAIF,GACZ8B,EAAS,2BAAID,GAAL,IAAYX,MAAO,GAAII,KAAM,MACrCS,EAAW,IAEXzB,MAAM,eAAD,OAAgBN,EAASG,KAAKe,MAA9B,oBAIRd,OAAM,SAAAC,GACHJ,QAAQC,IAAIG,EAAML,UAClBM,MAAMD,EAAML,SAASG,KAAKE,WAY9B,UACG,sBAAKvB,UAAU,aAAf,UACI,uBAAOA,UAAU,aAAjB,mBACA,uBAAOyD,SAAUP,EAAa,SAAUI,MAAOlB,EAAOsB,KAAK,OAAO1D,UAAU,eAAe2D,YAAY,aAAaC,UAAQ,OAEhI,sBAAK5D,UAAU,aAAf,UACI,uBAAOA,UAAU,aAAjB,qBAEA,cAAC,IAAD,CACAyD,SAtDW,SAACL,GACnBjC,QAAQC,IAAIgC,GACZH,EAAWG,IAoDqBE,MAAOhB,EAASuB,MAAM,SAAS7D,UAAU,YAAY2D,YAAY,kBAAkBrD,MAAO,CAACwD,OAAQ,uBAShI,sBAAK9D,UAAU,aAAf,UACI,uBAAOA,UAAU,aAAjB,kBACA,uBAAOyD,SAAUP,EAAa,QAASI,MAAOd,EAAMkB,KAAK,OAAO1D,UAAU,eAAe2D,YAAY,YAAYC,UAAQ,OAE7H,8BACI,wBAAQ5D,UAAU,sBAAlB,8BCjDE+D,EAjCI,SAACC,GAAW,IAAD,EACJtD,mBAAS,IADL,mBACrBuB,EADqB,KACfgC,EADe,KAE5BxC,qBAAU,WACRX,IACGC,IADH,UACUC,4BADV,iBAC4CgD,EAAME,MAAMC,OAAOxC,OAC5DV,MAAK,SAACC,GAAD,OAAc+C,EAAQ/C,EAASG,SACpCC,OAAM,SAACC,GAAD,OAAWC,MAAM,kCACzB,IAkBH,OACE,sBAAKxB,UAAU,iBAAf,UACE,cAAC,EAAD,IACCiC,GAlBH,qBAAKjC,UAAU,MAAf,SACE,sBAAKA,UAAU,iCAAf,UACE,uBACA,6BAAKiC,EAAKG,QACV,qBAAKpC,UAAU,YAAf,SAA4BqC,IAAWJ,EAAKK,WAC5C,wCACS,sBAAMtC,UAAU,QAAhB,SAAyBiC,EAAKO,OADvC,gBACiE,IAC/D,sBAAMxC,UAAU,QAAhB,SACG,IAAIyC,KAAKR,EAAKS,WAAWC,+BCqFvByB,EArGI,SAACJ,GAAW,IAAD,EACJtD,mBAAS,IADL,gCAEFA,mBAAS,CACjC0B,MAAO,GAEPT,KAAM,GACNa,KAAM,MANoB,mBAErBO,EAFqB,KAEdC,EAFc,KASpBZ,EAAsBW,EAAtBX,MAAOT,EAAeoB,EAAfpB,KAAMa,EAASO,EAATP,KATO,EAUE9B,mBAAS,IAVX,mBAUrB4B,EAVqB,KAUZW,EAVY,KAYtBoB,EAAgB,SAACjB,GACrBjC,QAAQC,IAAIgC,GACZH,EAAWG,IAIPF,EAAe,SAACC,GAAD,OAAU,SAACC,GAC9BjC,QAAQC,IAAI,OAAQ+B,EAAM,QAASC,EAAMC,OAAOC,OAChDN,EAAS,2BAAID,GAAL,kBAAaI,EAAOC,EAAMC,OAAOC,WAIrCgB,EAAe,SAAAlB,GACjBA,EAAMI,iBACN1C,IAAMyD,IAAN,UAAavD,4BAAb,iBAA+CW,GAAQ,CAAES,QAAOE,UAASE,QAAO,CAC9EX,QAAS,CACLC,cAAc,UAAD,OAAYvC,QAG9B0B,MAAK,SAAAC,GAEFC,QAAQC,IAAIF,GAFE,MAGuBA,EAASG,KAAvCe,EAHO,EAGPA,MAAOE,EAHA,EAGAA,QAASX,EAHT,EAGSA,KAAMa,EAHf,EAGeA,KAC7BQ,EAAS,2BAAID,GAAL,IAAYX,QAAOE,UAASE,OAAMb,UAE1CH,MAAM,eAAD,OAAgBY,EAAhB,oBAKRd,OAAM,SAAAC,GACHJ,QAAQC,IAAIG,EAAML,UAClBM,MAAMD,EAAML,SAASG,KAAKE,WAOlCE,qBAAU,WACRX,IACGC,IADH,UACUC,4BADV,iBAC4CgD,EAAME,MAAMC,OAAOxC,OAC5DV,MAAK,SAACC,GAAc,IAAD,EACqBA,EAASG,KAAxCe,EADU,EACVA,MAAOE,EADG,EACHA,QAASX,EADN,EACMA,KAAMa,EADZ,EACYA,KAC9BQ,EAAS,2BAAKD,GAAN,IAAaX,QAAOT,OAAMa,UAClCS,EAAWX,MAEZhB,OAAM,SAACC,GAAD,OAAWC,MAAM,kCACzB,IA8BH,OACE,sBAAKxB,UAAU,iBAAf,UACE,cAAC,EAAD,IACA,uBACA,6CA9BF,uBAAMuD,SAAUe,EAAhB,UACA,sBAAKtE,UAAU,aAAf,UACI,uBAAOA,UAAU,aAAjB,mBACA,uBAAOyD,SAAUP,EAAa,SAAUI,MAAOlB,EAAOsB,KAAK,OAAO1D,UAAU,eAAe2D,YAAY,aAAaC,UAAQ,OAEhI,sBAAK5D,UAAU,aAAf,UACI,uBAAOA,UAAU,aAAjB,qBACA,cAAC,IAAD,CACKyD,SAAUY,EAAef,MAAOhB,EAASuB,MAAM,SAAS7D,UAAU,YAAY2D,YAAY,kBAAkBrD,MAAO,CAACwD,OAAQ,uBAMrI,sBAAK9D,UAAU,aAAf,UACI,uBAAOA,UAAU,aAAjB,kBACA,uBAAOyD,SAAUP,EAAa,QAASI,MAAOd,EAAMkB,KAAK,OAAO1D,UAAU,eAAe2D,YAAY,YAAYC,UAAQ,OAE7H,8BACI,wBAAQ5D,UAAU,sBAAlB,6BChBOF,eAlED,SAACkE,GAAW,IAAD,EAEKtD,mBAAS,CAC/ByC,KAAM,GACNqB,SAAU,KAJO,mBAEdzB,EAFc,KAEPC,EAFO,KAObG,EAAmBJ,EAAnBI,KAAMqB,EAAazB,EAAbyB,SAEd/C,qBAAU,WACN5B,KAAamE,EAAMjE,QAAQK,KAAK,QAGpC,IAAM8C,EAAe,SAACC,GAAD,OAAU,SAACC,GAC5BjC,QAAQC,IAAI,OAAQ+B,EAAM,QAASC,EAAMC,OAAOC,OAChDN,EAAS,2BAAID,GAAL,kBAAaI,EAAOC,EAAMC,OAAOC,WAyB7C,OACI,sBAAKtD,UAAU,iBAAf,UACI,cAAC,EAAD,IACA,uBACA,uCACA,uBACA,uBAAMuD,SA3BS,SAAAH,GACjBA,EAAMI,iBACNrC,QAAQsD,MAAM,CAACtB,OAAMqB,aACrB1D,IAAMmB,KAAN,UAAcjB,4BAAd,UAAiD,CAAEmC,OAAMqB,aACxDvD,MAAK,SAAAC,GAEFC,QAAQC,IAAIF,GN7BE,SAACA,EAAUf,GACrB,cAAXX,SAECC,eAAeiF,QAAQ,QAAS/E,KAAKgF,UAAUzD,EAASG,KAAKuD,QAC7DnF,eAAeiF,QAAQ,OAAQ/E,KAAKgF,UAAUzD,EAASG,KAAK8B,QAGhEhD,IMwBU0E,CAAa3D,GAAU,kBAAM8C,EAAMjE,QAAQK,KAAK,iBAMnDkB,OAAM,SAAAC,GACHJ,QAAQC,IAAIG,EAAML,UAClBM,MAAMD,EAAML,SAASG,KAAKE,WAW5B,UACH,sBAAKvB,UAAU,aAAf,UACI,uBAAOA,UAAU,aAAjB,kBACA,uBAAOyD,SAAUP,EAAa,QAASI,MAAOH,EAAMO,KAAK,OAAO1D,UAAU,eAAe2D,YAAY,YAAYC,UAAQ,OAG7H,sBAAK5D,UAAU,aAAf,UACI,uBAAOA,UAAU,aAAjB,sBACA,uBAAOyD,SAAUP,EAAa,YAAaI,MAAOkB,EAAUd,KAAK,WAAW1D,UAAU,eAAe2D,YAAY,gBAAgBC,UAAQ,OAE7I,8BACI,wBAAQ5D,UAAU,sBAAlB,+B,SChDE8E,EAbM,SAAC,GAAD,IAAcC,EAAd,EAAGC,UAAyBC,EAA5B,oCACjB,cAAC,IAAD,2BACQA,GADR,IAEIC,OAAQ,SAAAlB,GAAK,OACTnE,IACI,cAACkF,EAAD,eAAef,IAEf,cAAC,IAAD,CAAU/D,GAAI,CAAEkF,SAAU,SAAUpC,MAAO,CAAEqC,KAAMpB,EAAMqB,kBCY1DC,EAdA,WACX,OACI,cAAC,IAAD,UACI,eAAC,IAAD,WACI,cAAC,IAAD,CAAOC,KAAK,IAAIC,OAAK,EAACR,UAAWvE,IACjC,cAAC,EAAD,CAAc8E,KAAK,UAAUC,OAAK,EAACR,UAAWlC,IAC9C,cAAC,IAAD,CAAOyC,KAAK,cAAcC,OAAK,EAACR,UAAWjB,IAC3C,cAAC,EAAD,CAAcwB,KAAK,qBAAqBC,OAAK,EAACR,UAAWZ,IACzD,cAAC,IAAD,CAAOmB,KAAK,SAASC,OAAK,EAACR,UAAWS,UCXtDC,IAASR,OAEL,cAAC,EAAD,IAEFS,SAASC,eAAe,U","file":"static/js/main.513ae640.chunk.js","sourcesContent":["\r\n\r\n// save login response > (user's name and token) to session storage\r\n\r\nexport const authenticate = (response, next) => {\r\n    if(window !== 'undefined'){\r\n        /* console.log('authenticate', response) */\r\n        sessionStorage.setItem('token', JSON.stringify(response.data.token))\r\n        sessionStorage.setItem('user', JSON.stringify(response.data.name))\r\n    }\r\n\r\n    next();\r\n}\r\n\r\n// access token name from session storage\r\nexport const getToken = () => {\r\n    if(window !== 'undefined'){\r\n        if(sessionStorage.getItem('token')){\r\n          return JSON.parse(sessionStorage.getItem('token'));\r\n        } else {\r\n            return false;\r\n        }\r\n        \r\n        \r\n    }\r\n\r\n    \r\n}\r\n\r\n\r\n//  access user token from session storage\r\nexport const getUser = () => {\r\n    if(window !== 'undefined'){\r\n        if(sessionStorage.getItem('user')){\r\n          return JSON.parse(sessionStorage.getItem('user'));\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n// remove token from session storage \r\nexport const logout = (next) => {\r\n    if(window !== 'undefined'){\r\n        \r\n        sessionStorage.removeItem('token')\r\n        sessionStorage.removeItem('user')\r\n    }\r\n\r\n    next();\r\n}\r\n\r\n\r\n\r\n","import React from 'react'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport './index.css'\r\nimport {logout, getUser} from './helpers';\r\n\r\n\r\n\r\n\r\nconst Nav = ({ history }) => (\r\n  <nav>\r\n      <ul className=\"nav nav-tabs\">\r\n          <li className=\"nav-item pr-3 pt-3 pb-3\">\r\n              <Link to=\"/\">Home</Link>\r\n          </li>\r\n          <li className=\"nav-item pr-3 pt-3 pb-3\">\r\n              <Link to=\"/create\">Create</Link>\r\n          </li>\r\n\r\n          {!getUser() && (\r\n              <li className=\"nav-item ml-auto pr-3 pt-3 pb-3\">\r\n                  <Link to=\"/login\">Login</Link>\r\n              </li>\r\n          )}\r\n\r\n          {getUser() && (\r\n              <li\r\n                  onClick={() => logout(() => history.push('/'))}\r\n                  className=\"nav-item ml-auto pr-3 pt-3 pb-3\"\r\n                  style={{ cursor: 'pointer', float: 'right' }}\r\n              >\r\n                  Logout\r\n              </li>\r\n          )}\r\n      </ul>\r\n  </nav>\r\n);\r\n\r\nexport default withRouter(Nav);\r\n","import React, { useState, useEffect } from \"react\";\nimport Nav from './Nav';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport renderHTML from 'react-render-html';\nimport { getUser, getToken } from './helpers';\n\n\n\n\n\nconst App = () => {\n\n  const [posts, setPosts] = useState([]);\n\n  const fetchPosts = () => {\n    axios.get(`${process.env.REACT_APP_API}/posts`)\n    .then(response => {\n      console.log(response)\n      setPosts(response.data)\n    })\n    .catch(error => alert('Error fetching posts'));\n    \n  }\n\n  useEffect(() => {\n    fetchPosts();\n\n  }, [])\n\n  const deleteConfirm = (slug) => {\n    let answer = window.confirm('Are you sure you want to delete this post?');\n    if(answer){\n      deletePost(slug);\n    }\n  }\n\n  const deletePost = (slug) => {\n    axios.delete(`${process.env.REACT_APP_API}/post/${slug}`,{\n      headers: {\n          authorization: `Bearer ${getToken()}`\n      }\n  })\n    .then(response => {\n      alert(response.data.message);\n      fetchPosts();\n    })\n    .catch(error => alert('Error deleting post.'));\n  }\n\n  return (\n    <div className=\"container pb-5\">\n      <Nav/>\n      <br/>\n      <h1> MERN CRUD </h1>\n      <hr/>\n   {/*    {JSON.stringify(posts)} */}\n      {\n        posts.map((post, i) => (\n          <div className='row' key={post._id} style={{borderBottom: '1px solid silver'}}>\n             <div className=\"col pt-3 pb-2\">\n               <div className=\"row\">\n                <div className='col-md-10'>\n                    <Link to={`/post/${post.slug}`}>\n                      <h2>{post.title}</h2>\n                    </Link>\n                    \n                    <div className=\"lead pt-3\">{renderHTML(post.content.substring(0,100))}</div>\n\n                    <p>\n                      Author <span className=\"badge\">{post.user}</span> Published on \n                      <span className=\"badge\">{new Date(post.createdAt).toLocaleString()}</span>\n                      \n                    </p>\n                </div>\n                {getUser() && (\n                  <div className='col-md-2'>\n                  <Link to={`/post/update/${post.slug}` } className=\"btn btn-sm btn-outline-warning\">\n                          Update\n                      </Link>\n  \n                      <button onClick={()=>deleteConfirm(post.slug)} className=\"btn btn-sm btn-outline-danger ml-1\">\n                        Delete\n                      </button>\n                  </div>\n                )}\n              \n              </div>\n              \n              \n             </div>\n          </div>\n        ))\n      }\n    </div>\n  );\n};\n\nexport default App;\n","import React, {useState} from \"react\";\r\nimport axios from 'axios';\r\nimport Nav from './Nav'\r\nimport ReactQuill from 'react-quill';\r\nimport { getUser, getToken } from './helpers'\r\nimport 'react-quill/dist/quill.bubble.css';\r\n\r\n\r\nconst Create = () => {\r\n\r\n  const [state, setState] = useState({\r\n      title: '',\r\n      user: getUser()\r\n  });\r\n  \r\n  const [content, setContent] = useState('');\r\n\r\n  // rich text editor handle change\r\n\r\n  const handleContent = (event) => {\r\n      console.log(event);\r\n      setContent(event);\r\n\r\n  }\r\n\r\n  const {title, user} = state;\r\n\r\n  const handleChange = (name) => (event) => {\r\n    console.log('name', name, 'event', event.target.value)\r\n    setState({...state, [name]: event.target.value})\r\n\r\n  }\r\n\r\n  const handleSubmit = event => {\r\n      event.preventDefault();\r\n      axios.post(`${process.env.REACT_APP_API}/post`, { title, content, user }, {\r\n          headers: {\r\n              authorization: `Bearer ${getToken()}`\r\n          }\r\n      })\r\n      .then(response => {\r\n          //empty state\r\n          console.log(response)\r\n          setState({...state, title: '', user: ''});\r\n          setContent('');\r\n          //show success alert\r\n          alert(`Post titled ${response.data.title} is created.`)\r\n\r\n\r\n      })\r\n      .catch(error => {\r\n          console.log(error.response)\r\n          alert(error.response.data.error)\r\n      })\r\n\r\n  }\r\n\r\n  return (\r\n    <div className=\"container pb-5\">\r\n        <Nav/>\r\n        <br/>\r\n      <h1> CREATE POST </h1>\r\n      {/* {JSON.stringify(state)} */}\r\n      <br/>\r\n      <form onSubmit={handleSubmit}>\r\n         <div className='form-group'>\r\n             <label className='text-muted'>Title</label>\r\n             <input onChange={handleChange('title')} value={title} type='text' className='form-control' placeholder=\"Post Title\" required></input>\r\n         </div>\r\n         <div className='form-group'>\r\n             <label className='text-muted'>Content</label>\r\n\r\n             <ReactQuill \r\n             onChange={handleContent} value={content} theme=\"bubble\" className='pb-5 mb-3' placeholder=\"Write something\" style={{border: '1px solid #666'}}\r\n               \r\n             />\r\n\r\n             \r\n\r\n             \r\n             \r\n         </div>\r\n         <div className='form-group'>\r\n             <label className='text-muted'>User</label>\r\n             <input onChange={handleChange('user')} value={user} type='text' className='form-control' placeholder=\"Your Name\" required></input>\r\n         </div>\r\n         <div>\r\n             <button className='btn btn-primary m-2'>Create</button>\r\n         </div>\r\n\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Create;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Nav from \"./Nav\";\r\nimport renderHTML from \"react-render-html\";\r\n\r\nconst SinglePost = (props) => {\r\n  const [post, setPost] = useState(\"\");\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${process.env.REACT_APP_API}/post/${props.match.params.slug}`)\r\n      .then((response) => setPost(response.data))\r\n      .catch((error) => alert(\"Error loading single post\"));\r\n  }, []);\r\n\r\n  const showSinglePost = () => (\r\n    <div className=\"row\">\r\n      <div className=\"col md-8 offset-md-2 pt-3 pb-2\">\r\n        <br />\r\n        <h1>{post.title}</h1>\r\n        <div className=\"lead pt-3\">{renderHTML(post.content)}</div>\r\n        <p>\r\n          Author <span className=\"badge\">{post.user}</span> Published on{\" \"}\r\n          <span className=\"badge\">\r\n            {new Date(post.createdAt).toLocaleString()}\r\n          </span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"container pb-5\">\r\n      <Nav />\r\n      {post && showSinglePost()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SinglePost;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Nav from \"./Nav\";\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.bubble.css';\r\nimport { getToken } from './helpers';\r\n\r\nconst UpdatePost = (props) => {\r\n  const [post, setPost] = useState(\"\");\r\n  const [state, setState] = useState({\r\n    title: \"\",\r\n   \r\n    slug: \"\",\r\n    user: \"\",\r\n  });\r\n\r\n  const { title, slug, user } = state;\r\n  const [content, setContent] = useState('');\r\n\r\n  const handleContent = (event) => {\r\n    console.log(event);\r\n    setContent(event);\r\n\r\n}\r\n\r\n  const handleChange = (name) => (event) => {\r\n    console.log('name', name, 'event', event.target.value)\r\n    setState({...state, [name]: event.target.value})\r\n\r\n  }\r\n\r\n  const handleSubmit = event => {\r\n      event.preventDefault();\r\n      axios.put(`${process.env.REACT_APP_API}/post/${slug}`, { title, content, user },{\r\n        headers: {\r\n            authorization: `Bearer ${getToken()}`\r\n        }\r\n    })\r\n      .then(response => {\r\n          //empty state\r\n          console.log(response)\r\n          const {title, content, slug, user} = response.data\r\n          setState({...state, title, content, user, slug})\r\n          //show success alert\r\n          alert(`Post titled ${title} is updated.`)\r\n\r\n\r\n\r\n      })\r\n      .catch(error => {\r\n          console.log(error.response)\r\n          alert(error.response.data.error)\r\n      })\r\n\r\n  }\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${process.env.REACT_APP_API}/post/${props.match.params.slug}`)\r\n      .then((response) => {\r\n        const { title, content, slug, user } = response.data;\r\n        setState({ ...state, title, slug, user });\r\n        setContent(content);\r\n      })\r\n      .catch((error) => alert(\"Error loading single post\"));\r\n  }, []);\r\n\r\n  const showUpdateForm = () => (\r\n    \r\n    <form onSubmit={handleSubmit}>\r\n    <div className='form-group'>\r\n        <label className='text-muted'>Title</label>\r\n        <input onChange={handleChange('title')} value={title} type='text' className='form-control' placeholder=\"Post Title\" required></input>\r\n    </div>\r\n    <div className='form-group'>\r\n        <label className='text-muted'>Content</label>\r\n        <ReactQuill \r\n             onChange={handleContent} value={content} theme=\"bubble\" className='pb-5 mb-3' placeholder=\"Write something\" style={{border: '1px solid #666'}}\r\n               \r\n             />\r\n\r\n        \r\n    </div>\r\n    <div className='form-group'>\r\n        <label className='text-muted'>User</label>\r\n        <input onChange={handleChange('user')} value={user} type='text' className='form-control' placeholder=\"Your Name\" required></input>\r\n    </div>\r\n    <div>\r\n        <button className='btn btn-primary m-2'>Update</button>\r\n    </div>\r\n\r\n </form>\r\n    \r\n  );\r\n\r\n  return (\r\n    <div className=\"container pb-5\">\r\n      <Nav />\r\n      <br />\r\n      <h1>UPDATE POST</h1>\r\n\r\n      {showUpdateForm()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpdatePost;\r\n","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport Nav from './Nav';\r\nimport {authenticate, getUser} from './helpers';\r\n\r\n\r\n\r\nconst Login = (props) => {\r\n\r\n    const [state, setState] = useState({\r\n        name: '',\r\n        password: ''\r\n    })\r\n\r\n    const { name, password } = state;  // destructure values from state\r\n\r\n    useEffect(() => {\r\n        getUser() && props.history.push('/');\r\n    })\r\n\r\n    const handleChange = (name) => (event) => {\r\n        console.log('name', name, 'event', event.target.value)\r\n        setState({...state, [name]: event.target.value})\r\n    \r\n      }\r\n    \r\n      const handleSubmit = event => {\r\n          event.preventDefault();\r\n          console.table({name, password});\r\n          axios.post(`${process.env.REACT_APP_API}/login`, { name, password })\r\n          .then(response => {\r\n              \r\n              console.log(response)\r\n              // response will contain token and name\r\n              authenticate(response, () => props.history.push('/create'));\r\n              // redirect to create page\r\n              \r\n    \r\n    \r\n          })\r\n          .catch(error => {\r\n              console.log(error.response)\r\n              alert(error.response.data.error)\r\n          })\r\n    \r\n      }\r\n\r\n    return (\r\n        <div className='container pb-5'>\r\n            <Nav/>\r\n            <br/>\r\n            <h1>LOGIN</h1>\r\n            <hr/>\r\n            <form onSubmit={handleSubmit}>\r\n         <div className='form-group'>\r\n             <label className='text-muted'>User</label>\r\n             <input onChange={handleChange('name')} value={name} type='text' className='form-control' placeholder=\"Your Name\" required></input>\r\n         </div>\r\n         \r\n         <div className='form-group'>\r\n             <label className='text-muted'>Password</label>\r\n             <input onChange={handleChange('password')} value={password} type='password' className='form-control' placeholder=\"Your Password\" required></input>\r\n         </div>\r\n         <div>\r\n             <button className='btn btn-primary m-2'>Submit</button>\r\n         </div>\r\n\r\n      </form>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Login)\r\n","import React, { Component } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { getUser } from './helpers';\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n    <Route\r\n        {...rest}\r\n        render={props =>\r\n            getUser() ? (\r\n                <Component {...props} />\r\n            ) : (\r\n                <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\r\n            )\r\n        }\r\n    />\r\n);\r\n\r\nexport default PrivateRoute;\r\n","import React from 'react';\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\r\nimport App from './App'\r\nimport Create from './Create';\r\nimport SinglePost from './SinglePost'\r\nimport UpdatePost from './UpdatePost'\r\nimport Login from './Login'\r\nimport PrivateRoute from './PrivateRoute';\r\n\r\nconst Routes = () => {\r\n    return (\r\n        <BrowserRouter>\r\n            <Switch>\r\n                <Route path='/' exact component={App} />\r\n                <PrivateRoute path='/create' exact component={Create} />\r\n                <Route path='/post/:slug' exact component={SinglePost} />\r\n                <PrivateRoute path='/post/update/:slug' exact component={UpdatePost} />\r\n                <Route path='/login' exact component={Login} />\r\n            </Switch>\r\n        </BrowserRouter>\r\n    )\r\n}\r\n\r\nexport default Routes;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Routes from './Routes';\n\n\nReactDOM.render(\n \n    <Routes />\n  ,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}